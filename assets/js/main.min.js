window.onload=function(){var pts=0,stage=document.getElementById("stage"),ctx=stage.getContext("2d");document.addEventListener("keydown",keyPush),setInterval(game,80);const vel=1;var backgroundFood=new Image;backgroundFood.src="assets/img/food.png";var vx=vy=0,px=10,py=15,tp=30,qp=20,ax=ay=15,trail=[];function game(){px+=vx,py+=vy,px<0&&(px=19),px>19&&(px=0),py<0&&(py=19),py>19&&(py=0),ctx.fillStyle="black",ctx.fillRect(0,0,stage.width,stage.height),ctx.drawImage(backgroundFood,30*ax,30*ay,30,30),ctx.fillStyle="white",ctx.font="30px Arial",ctx.fillText(pts,20,40),ctx.fillStyle="white";for(var i=0;i<trail.length;i++)ctx.fillRect(30*trail[i].x,30*trail[i].y,30,30),console.log(px),trail[i].x==px&&trail[i].y==py&&(pts=0,vx=vy=0,tail=5);for(trail.push({x:px,y:py});trail.length>tail;)trail.shift();ax==px&&ay==py&&(placar(),tail++,ax=Math.floor(20*Math.random()),ay=Math.floor(20*Math.random()))}function placar(){pts++}function keyPush(event){switch(event.keyCode){case 37:vx=-1,vy=0;break;case 38:vx=0,vy=-1;break;case 39:vx=1,vy=0;break;case 40:vx=0,vy=1}}tail=5};